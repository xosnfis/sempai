{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Сценарии использования - Альфа-Ассистент</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}?v={{ cache_version }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation Header -->
    <header class="index-header">
        <div class="index-header-container">
            <!-- Мобильное меню будет создано автоматически через JS -->
            <div class="index-logo">
                <a href="{% url 'index' %}" class="index-logo-link">
                    <span class="index-logo-red">А</span>льфа-Ассистент
                </a>
            </div>
            <nav class="index-nav">
                <a href="#" class="index-nav-link index-nav-link-highlight" id="indexChatLink" onclick="handleChatClick(event)">ИИ-Чат</a>
                <a href="#" class="index-nav-link" id="indexCabinetLink" onclick="handleCabinetClick(event)">Личный кабинет</a>
                <a href="{% url 'scenarios' %}" class="index-nav-link index-nav-link-active">Возможности</a>
                <a href="{% url 'support' %}" class="index-nav-link">Поддержка</a>
            </nav>
            <div class="index-header-actions">
                <button class="index-theme-toggle" id="indexThemeToggle" onclick="toggleIndexTheme()" title="Переключить тему">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="indexThemeIcon">
                        <path d="M12 3V1M12 23V21M21 12H23M1 12H3M18.364 18.364L19.778 19.778M4.222 4.222L5.636 5.636M18.364 5.636L19.778 4.222M4.222 19.778L5.636 18.364M12 18C15.314 18 18 15.314 18 12C18 8.686 15.314 6 12 6C8.686 6 6 8.686 6 12C6 15.314 8.686 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <button id="indexAuthBtn" class="index-login-btn" onclick="handleAuthButtonClick(event)">Войти / Регистрация</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="scenarios-main">
        <!-- Hero Section -->
        <section class="scenarios-hero">
            <div class="scenarios-hero-content">
                <h1 class="scenarios-hero-title">Сценарии использования <span class="scenarios-hero-title-red">ассистента</span></h1>
                <p class="scenarios-hero-subtitle">Реальные примеры того, как ИИ-помощник решает бизнес-задачи</p>
            </div>
        </section>

        <!-- Detailed Scenarios -->
        <div class="scenarios-detailed">
            <!-- Scenario 1: Управление складом -->
            <div class="scenario-detail-card">
                <div class="scenario-detail-header">
                    <div class="scenario-detail-icon">
                        <img src="{% static 'images/3.png' %}" alt="Инвентаризация" loading="lazy">
                    </div>
                    <h2 class="scenario-detail-title">Управление складом и инвентаризация</h2>
                </div>
                <div class="scenario-detail-content">
                    <div class="scenario-detail-example">
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">1</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Запрос пользователя:</p>
                                <p class="scenario-detail-step-text">"Сколько осталось товаров в категории 'Электроника'?"</p>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">2</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Что делает ассистент:</p>
                                <ul class="scenario-detail-step-list">
                                    <li>Анализирует данные инвентаризации</li>
                                    <li>Группирует товары по категориям</li>
                                    <li>Показывает количество и стоимость</li>
                                    <li>Создает наглядный график или таблицу</li>
                                </ul>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">3</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Результат:</p>
                                <p class="scenario-detail-step-text">Детальный отчет с визуализацией, готовый к экспорту</p>
                            </div>
                        </div>
                    </div>
                    <div class="scenario-detail-actions">
                        <a href="{% url 'chat' %}" class="scenario-detail-btn">Попробовать этот сценарий →</a>
                    </div>
                </div>
            </div>

            <!-- Scenario 2: Анализ финансов -->
            <div class="scenario-detail-card">
                <div class="scenario-detail-header">
                    <div class="scenario-detail-icon">
                        <img src="{% static 'images/2.png' %}" alt="Финансы" loading="lazy">
                    </div>
                    <h2 class="scenario-detail-title">Анализ финансов и расходов</h2>
                </div>
                <div class="scenario-detail-content">
                    <div class="scenario-detail-example">
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">1</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Запрос пользователя:</p>
                                <p class="scenario-detail-step-text">"Покажи расходы за месяц и подскажи, на чем можно сэкономить"</p>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">2</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Что делает ассистент:</p>
                                <ul class="scenario-detail-step-list">
                                    <li>Анализирует все чеки и операции</li>
                                    <li>Группирует расходы по категориям</li>
                                    <li>Строит график динамики расходов</li>
                                    <li>Выявляет категории с наибольшими тратами</li>
                                    <li>Предлагает конкретные рекомендации по экономии</li>
                                </ul>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">3</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Результат:</p>
                                <p class="scenario-detail-step-text">График расходов + список рекомендаций с конкретными суммами</p>
                            </div>
                        </div>
                    </div>
                    <div class="scenario-detail-actions">
                        <a href="{% url 'chat' %}" class="scenario-detail-btn">Попробовать этот сценарий →</a>
                    </div>
                </div>
            </div>

            <!-- Scenario 3: Планирование -->
            <div class="scenario-detail-card">
                <div class="scenario-detail-header">
                    <div class="scenario-detail-icon">
                        <img src="{% static 'images/Ресурс 1.png' %}" alt="Календарь" loading="lazy">
                    </div>
                    <h2 class="scenario-detail-title">Планирование и управление календарем</h2>
                </div>
                <div class="scenario-detail-content">
                    <div class="scenario-detail-example">
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">1</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Запрос пользователя:</p>
                                <p class="scenario-detail-step-text">"Запланируй встречу с клиентом на завтра в 15:00"</p>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">2</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Что делает ассистент:</p>
                                <ul class="scenario-detail-step-list">
                                    <li>Создает событие в календаре</li>
                                    <li>Проверяет конфликты по времени</li>
                                    <li>Подтверждает создание</li>
                                    <li>Уведомляет о успешном планировании</li>
                                </ul>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">3</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Результат:</p>
                                <p class="scenario-detail-step-text">Событие создано, можно также запросить список всех встреч на неделю</p>
                            </div>
                        </div>
                    </div>
                    <div class="scenario-detail-actions">
                        <a href="{% url 'chat' %}" class="scenario-detail-btn">Попробовать этот сценарий →</a>
                    </div>
                </div>
            </div>

            <!-- Scenario 4: Управление сотрудниками -->
            <div class="scenario-detail-card">
                <div class="scenario-detail-header">
                    <div class="scenario-detail-icon">
                        <img src="{% static 'images/8.png' %}" alt="Сотрудники" loading="lazy">
                    </div>
                    <h2 class="scenario-detail-title">Управление сотрудниками</h2>
                </div>
                <div class="scenario-detail-content">
                    <div class="scenario-detail-example">
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">1</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Запрос пользователя:</p>
                                <p class="scenario-detail-step-text">"Сколько сотрудников работает и каков общий фонд зарплат?"</p>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">2</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Что делает ассистент:</p>
                                <ul class="scenario-detail-step-list">
                                    <li>Подсчитывает количество сотрудников</li>
                                    <li>Суммирует все зарплаты</li>
                                    <li>Создает таблицу с данными</li>
                                    <li>Строит график распределения зарплат</li>
                                </ul>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">3</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Результат:</p>
                                <p class="scenario-detail-step-text">Таблица со списком сотрудников + общая статистика + график</p>
                            </div>
                        </div>
                    </div>
                    <div class="scenario-detail-actions">
                        <a href="{% url 'chat' %}" class="scenario-detail-btn">Попробовать этот сценарий →</a>
                    </div>
                </div>
            </div>

            <!-- Scenario 5: Анализ документов -->
            <div class="scenario-detail-card">
                <div class="scenario-detail-header">
                    <div class="scenario-detail-icon">
                        <img src="{% static 'images/7.png' %}" alt="Документы" loading="lazy">
                    </div>
                    <h2 class="scenario-detail-title">Анализ документов</h2>
                </div>
                <div class="scenario-detail-content">
                    <div class="scenario-detail-example">
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">1</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Запрос пользователя:</p>
                                <p class="scenario-detail-step-text">"Проанализируй текст в прикрепленном файле и выдели основные моменты"</p>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">2</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Что делает ассистент:</p>
                                <ul class="scenario-detail-step-list">
                                    <li>Читает и анализирует документ (PDF, DOCX, XLSX, изображения)</li>
                                    <li>Выделяет ключевые моменты</li>
                                    <li>Создает краткое резюме</li>
                                    <li>Отвечает на вопросы по содержанию</li>
                                </ul>
                            </div>
                        </div>
                        <div class="scenario-detail-step">
                            <span class="scenario-detail-step-number">3</span>
                            <div class="scenario-detail-step-content">
                                <p class="scenario-detail-step-label">Результат:</p>
                                <p class="scenario-detail-step-text">Структурированный анализ документа с основными выводами</p>
                            </div>
                        </div>
                    </div>
                    <div class="scenario-detail-actions">
                        <a href="{% url 'chat' %}" class="scenario-detail-btn">Попробовать этот сценарий →</a>
                    </div>
                </div>
            </div>

            <!-- CTA Section -->
            <div class="scenarios-cta-section">
                <h2 class="scenarios-cta-title">Готовы начать?</h2>
                <p class="scenarios-cta-text">Попробуйте ассистента прямо сейчас — это бесплатно</p>
                <a href="{% url 'chat' %}" class="scenarios-cta-button">Начать работу с ассистентом</a>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h4 class="footer-heading">О ПРОЕКТЕ</h4>
                <a href="#" class="footer-link">О нас</a>
                <a href="#" class="footer-link">Возможности</a>
                <a href="{% url 'chat' %}" class="footer-link">Попробовать ассистента</a>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">ПОДДЕРЖКА</h4>
                <a href="{% url 'support' %}" class="footer-link">Помощь</a>
                <a href="{% url 'feedback' %}" class="footer-link">Обратная связь</a>
                <a href="#" class="footer-link">Документация</a>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">КОНТАКТЫ</h4>
                <p class="footer-text">Нижневартовск</p>
                <a href="mailto:support@alfa-assistant.ru" class="footer-link">support@alfa-assistant.ru</a>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">МЫ В СОЦСЕТЯХ</h4>
                <div class="footer-social">
                    <a href="#" class="social-icon social-telegram">
                        <img src="{% static 'images/tg.png' %}" alt="Telegram" loading="lazy">
                    </a>
                    <a href="#" class="social-icon social-vk">
                        <img src="{% static 'images/vk.png' %}" alt="VKontakte" loading="lazy">
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-legal">
            <p>© 2025 Альфа-Ассистент. Все права защищены.</p>
            <p><a href="#">Политика конфиденциальности</a> | <a href="#">Условия использования</a></p>
        </div>
    </footer>

    <script>
        // Функции смены темы
        function toggleIndexTheme() {
            const currentTheme = localStorage.getItem('theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            localStorage.setItem('theme', newTheme);
            applyIndexTheme(newTheme);
            updateIndexThemeIcon(newTheme);
        }

        function applyIndexTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-theme');
                document.documentElement.classList.add('dark-theme');
            } else {
                document.body.classList.remove('dark-theme');
                document.documentElement.classList.remove('dark-theme');
            }
        }

        function updateIndexThemeIcon(theme) {
            const themeIcon = document.getElementById('indexThemeIcon');
            if (!themeIcon) return;
            
            // SVG для светлой темы (солнце)
            const lightIcon = `<path d="M12 3V1M12 23V21M21 12H23M1 12H3M18.364 18.364L19.778 19.778M4.222 4.222L5.636 5.636M18.364 5.636L19.778 4.222M4.222 19.778L5.636 18.364M12 18C15.314 18 18 15.314 18 12C18 8.686 15.314 6 12 6C8.686 6 6 8.686 6 12C6 15.314 8.686 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>`;
            
            // SVG для темной темы (луна)
            const darkIcon = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>`;
            
            themeIcon.innerHTML = theme === 'dark' ? darkIcon : lightIcon;
        }

        // Применение сохраненной темы при загрузке
        window.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            applyIndexTheme(savedTheme);
            updateIndexThemeIcon(savedTheme);
            
            // Обновление кнопки авторизации при загрузке
            updateAuthButton();
        });

        // Проверка авторизации пользователя
        function isUserAuthenticated() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) return false;
            try {
                const user = JSON.parse(currentUser);
                return user && user.email;
            } catch (e) {
                return false;
            }
        }

        // Обработка клика на кнопку ИИ-Чат
        function handleChatClick(event) {
            event.preventDefault();
            
            if (isUserAuthenticated()) {
                // Пользователь авторизован - переходим в чат
                window.location.href = "{% url 'chat' %}";
            } else {
                // Пользователь не авторизован - показываем модальное окно
                document.getElementById('loginRequiredModal').style.display = 'flex';
            }
        }

        // Обработка клика на кнопку Личный кабинет
        function handleCabinetClick(event) {
            event.preventDefault();
            
            if (isUserAuthenticated()) {
                // Пользователь авторизован - переходим в кабинет
                window.location.href = "{% url 'cabinet' %}";
            } else {
                // Пользователь не авторизован - показываем модальное окно регистрации
                document.getElementById('loginRequiredModal').style.display = 'flex';
            }
        }

        // Обработка клика на кнопку авторизации/профиля
        function handleAuthButtonClick(event) {
            event.preventDefault();
            
            if (isUserAuthenticated()) {
                // Показываем модальное окно профиля
                showProfileModal();
            } else {
                // Переходим на страницу входа
                window.location.href = "{% url 'login' %}";
            }
        }

        // Обновление вида кнопки авторизации
        function updateAuthButton() {
            const authBtn = document.getElementById('indexAuthBtn');
            if (!authBtn) return;
            
            if (isUserAuthenticated()) {
                authBtn.textContent = 'Профиль';
                authBtn.classList.add('index-profile-btn');
            } else {
                authBtn.textContent = 'Войти / Регистрация';
                authBtn.classList.remove('index-profile-btn');
            }
        }

        // Показать модальное окно профиля
        function showProfileModal() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const modal = document.getElementById('indexProfileModal');
            
            // Заполняем данные профиля
            document.getElementById('indexProfileName').textContent = currentUser.organization || 'Не указано';
            document.getElementById('indexProfileEmail').textContent = currentUser.email || 'Не указано';
            
            modal.style.display = 'flex';
        }

        // Редактирование профиля
        function editProfile() {
            closeProfileModal();
            window.location.href = "{% url 'cabinet' %}";
        }

        // Закрыть модальное окно профиля
        function closeProfileModal() {
            document.getElementById('indexProfileModal').style.display = 'none';
        }

        // Закрыть модальное окно авторизации
        function closeLoginRequiredModal() {
            document.getElementById('loginRequiredModal').style.display = 'none';
        }

        // Переход на страницу входа из модального окна
        function goToLogin() {
            window.location.href = "{% url 'login' %}";
        }

        // Выход из аккаунта
        function logout() {
            if (confirm('Вы уверены, что хотите выйти?')) {
                localStorage.removeItem('currentUser');
                updateAuthButton();
                closeProfileModal();
                // Обновляем страницу для применения изменений
                window.location.reload();
            }
        }

        // Закрытие модальных окон по клику вне их
        window.addEventListener('click', function(event) {
            const profileModal = document.getElementById('indexProfileModal');
            const loginModal = document.getElementById('loginRequiredModal');
            
            if (event.target === profileModal) {
                closeProfileModal();
            }
            if (event.target === loginModal) {
                closeLoginRequiredModal();
            }
        });
    </script>

    <!-- Modal: Требуется авторизация -->
    <div class="index-modal" id="loginRequiredModal" style="display: none;">
        <div class="index-modal-content">
            <div class="index-modal-header">
                <h2 class="index-modal-title">Требуется авторизация</h2>
                <button class="index-modal-close" onclick="closeLoginRequiredModal()">×</button>
            </div>
            <div class="index-modal-body">
                <p class="index-modal-text">Для использования ИИ-чата необходимо войти в аккаунт или зарегистрироваться.</p>
            </div>
            <div class="index-modal-footer">
                <button class="index-modal-btn index-modal-btn-secondary" onclick="closeLoginRequiredModal()">Отмена</button>
                <button class="index-modal-btn index-modal-btn-primary" onclick="goToLogin()">Войти / Регистрация</button>
            </div>
        </div>
    </div>

    <!-- Modal: Профиль пользователя -->
    <div class="index-modal" id="indexProfileModal" style="display: none;">
        <div class="index-profile-modal-content">
            <div class="index-profile-header">
                <h2 class="index-profile-title">Профиль</h2>
                <button class="index-profile-back-btn" onclick="closeProfileModal()" title="Закрыть">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 18L9 12L15 6" stroke="#ff3333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="index-profile-body">
                <div class="index-profile-info-block">
                    <div class="index-profile-name" id="indexProfileName">Не указано</div>
                    <div class="index-profile-email" id="indexProfileEmail">Не указано</div>
                </div>
                <div class="index-profile-actions">
                    <button class="index-profile-action-btn" onclick="editProfile()">
                        <span>Редактировать профиль</span>
                    </button>
                    <button class="index-profile-action-btn index-profile-action-btn-logout" onclick="logout()">
                        <span>Выйти</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

