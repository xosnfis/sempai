services:
  web:
    build: .
    container_name: alfa-ai-web
    ports:
      - "8000:8000"
    volumes:
      # Монтируем код для разработки (можно закомментировать для production)
      - ./aichat:/app/aichat
      # Монтируем базу данных и медиа файлы
      - ./aichat/db.sqlite3:/app/aichat/db.sqlite3
      - ./aichat/media:/app/aichat/media
    environment:
      - DJANGO_SETTINGS_MODULE=aichat.settings
      - PYTHONUNBUFFERED=1
    command:
      - sh
      - -c
      - |
        echo ""
        echo "========================================"
        echo ":rocket: Сервер Django запущен!"
        echo ":mobile_phone: Откройте в браузере: http://localhost:8000"
        echo "========================================"
        echo ""
        python manage.py runserver 0.0.0.0:8000
    restart: unless-stopped
