{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>Альфа-Ассистент - ИИ-помощник для бизнеса</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}?v={{ cache_version }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <!-- Система индикаторов загрузки -->
    <script src="{% static 'js/loading-indicators.js' %}?v={{ cache_version }}"></script>
    <!-- Lazy Loading для изображений -->
    <script src="{% static 'js/lazy-loading.js' %}?v={{ cache_version }}"></script>
    <!-- Система обработки ошибок -->
    <script src="{% static 'js/error-handler.js' %}?v={{ cache_version }}"></script>
    <!-- Система модальных окон -->
    <script src="{% static 'js/modal.js' %}?v={{ cache_version }}"></script>
    <!-- Мобильное меню -->
    <script src="{% static 'js/mobile-menu.js' %}?v={{ cache_version }}"></script>
    <style>
        .hero-background {
            background-image: url('{% static "images/glavfon.jpg" %}?v={{ cache_version }}') !important;
        }
    </style>
</head>
<body>
    <!-- Navigation Header -->
    <header class="index-header">
        <div class="index-header-container">
            <!-- Мобильное меню будет создано автоматически через JS -->
            <div class="index-logo">
                <a href="{% url 'index' %}" class="index-logo-link">
                    <span class="index-logo-red">А</span>льфа-Ассистент
                </a>
            </div>
            <nav class="index-nav">
                <a href="#" class="index-nav-link index-nav-link-highlight" id="indexChatLink" onclick="handleChatClick(event)">ИИ-Чат</a>
                <a href="#" class="index-nav-link" id="indexCabinetLink" onclick="handleCabinetClick(event)">Личный кабинет</a>
                <a href="{% url 'scenarios' %}" class="index-nav-link">Возможности</a>
                <a href="{% url 'support' %}" class="index-nav-link">Поддержка</a>
            </nav>
            <div class="index-header-actions">
                <button class="index-theme-toggle" id="indexThemeToggle" onclick="toggleIndexTheme()" title="Переключить тему">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="indexThemeIcon">
                        <path d="M12 3V1M12 23V21M21 12H23M1 12H3M18.364 18.364L19.778 19.778M4.222 4.222L5.636 5.636M18.364 5.636L19.778 4.222M4.222 19.778L5.636 18.364M12 18C15.314 18 18 15.314 18 12C18 8.686 15.314 6 12 6C8.686 6 6 8.686 6 12C6 15.314 8.686 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
                <button id="indexAuthBtn" class="index-login-btn" onclick="handleAuthButtonClick(event)">Войти / Регистрация</button>
            </div>
        </div>
    </header>
    
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-background">
            <div class="network-pattern"></div>
        </div>
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="title-red">А</span>льфа-Ассистент
            </h1>
            <p class="hero-subtitle">Меньше рутины — больше результатов</p>
            <p class="hero-description">ИИ-помощник отвечает на вопросы и помогает вести бизнес</p>
            <p class="hero-description">эффективнее.</p>
            <a href="{% url 'login' %}" class="cta-button">Перейти в кабинет</a>
        </div>
    </section>

    <!-- Welcome Section -->
    <section class="welcome-section">
        <div class="welcome-card">
            <div class="bookmark-icon"></div>
            <h2 class="welcome-title">Добро пожаловать!</h2>
            <p class="welcome-text">Искусственный интеллект — ваш надёжный партнёр, который понимает задачи, анализирует данные и предлагает умные решения.</p>
            <p class="welcome-text">ИИ учится на каждом взаимодействии и помогает принимать решения быстрее и точнее.</p>
        </div>
    </section>

    <!-- Advantages Section -->
    <section class="advantages-section">
        <h2 class="advantages-title">Плюсы АЛЬФА-АССИСТЕНТА</h2>
        <div class="advantages-content">
            <div class="advantages-list">
                <div class="advantage-item">
                    <span class="advantage-number">1.</span>
                    <div class="advantage-text">
                        <h3 class="advantage-title">Автоматизирует рутину</h3>
                        <p class="advantage-description">Не нужно тратить часы на отчёты, счета и переписку. Помощник делает это сам — быстро и без ошибок.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-number">2.</span>
                    <div class="advantage-text">
                        <h3 class="advantage-title">Анализирует финансы в реальном времени</h3>
                        <p class="advantage-description">Показывает, куда уходят деньги, где можно сэкономить и как увеличить прибыль.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-number">3.</span>
                    <div class="advantage-text">
                        <h3 class="advantage-title">Подсказывает решения, а не просто цифры</h3>
                        <p class="advantage-description">Искусственный интеллект сравнивает данные, ищет закономерности и предлагает конкретные шаги.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-number">4.</span>
                    <div class="advantage-text">
                        <h3 class="advantage-title">Работает 24/7 без перерывов</h3>
                        <p class="advantage-description">Не устает, не заболел, не ушёл в отпуск — всегда рядом и готов помочь.</p>
                    </div>
                </div>
                <div class="advantage-item">
                    <span class="advantage-number">5.</span>
                    <div class="advantage-text">
                        <h3 class="advantage-title">Помогает планировать развитие</h3>
                        <p class="advantage-description">Прогнозы, цели, сценарии и стратегии — всё понятно и визуально.</p>
                    </div>
                </div>
            </div>
            <div class="advantages-illustration">
                <img src="{% static 'images/ai_bot.png' %}" alt="Иллюстрация" loading="lazy">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <h2 class="features-title">ЧТО УМЕЕТ <span class="features-title-red">ЛИЧНЫЙ КАБИНЕТ</span></h2>
        <div class="features-grid">
            <div class="feature-card feature-card-light">
                <h3 class="feature-card-title">Документы</h3>
                <p class="feature-card-description">Все важные документы хранятся в безопасном облачном хранилище.</p>
                <ul class="feature-list">
                    <li>Безопасное хранение</li>
                    <li>Автоматическая синхронизация</li>
                    <li>Быстрый поиск документов</li>
                    <li>Доступ с любого устройства</li>
                </ul>
            </div>
            <div class="feature-card feature-card-green">
                <h3 class="feature-card-title">Календарь</h3>
                <p class="feature-card-description">Планируйте встречи, дедлайны и важные события.</p>
                <ul class="feature-list feature-list-green">
                    <li>Планирование встреч</li>
                    <li>Синхронизация календарей</li>
                    <li>Управление дедлайнами</li>
                    <li>Добавление событий</li>
                </ul>
            </div>
            <div class="feature-card feature-card-green">
                <h3 class="feature-card-title">Финансы</h3>
                <p class="feature-card-description">Быстрая и безопасная оплата услуг.</p>
                <ul class="feature-list feature-list-green">
                    <li>Автоматические напоминания</li>
                    <li>Оплата в один клик</li>
                    <li>Безопасные платежи</li>
                    <li>История платежей</li>
                </ul>
            </div>
            <div class="feature-card feature-card-light">
                <h3 class="feature-card-title">Чат-помощник</h3>
                <p class="feature-card-description">ИИ-чат помощник всегда готов ответить на ваши вопросы</p>
                <ul class="feature-list">
                    <li>Круглосуточная поддержка</li>
                    <li>Мгновенные ответы</li>
                    <li>Решение любых вопросов</li>
                    <li>Помощник на базе ИИ</li>
                </ul>
            </div>
        </div>
    </section>

    <!-- Business Assistant Section -->
    <section class="business-assistant-section">
        <h2 class="business-assistant-title">ЧТО УМЕЕТ <span class="business-assistant-title-red">АЛЬФА-АССИСТЕНТ</span></h2>
        <div class="business-assistant-container">
            <div class="business-assistant-grid">
                <div class="business-assistant-card business-assistant-card-green">
                    <h3 class="business-assistant-card-text">СПРОСИ ПОМОЩНИКА — И ОН СДЕЛАЕТ</h3>
                    <div class="business-assistant-robot">
                        <img src="{% static 'images/Group 4554.png' %}" alt="Робот-помощник" loading="lazy">
                    </div>
                </div>
                <div class="business-assistant-card business-assistant-card-white">
                    <h3 class="business-assistant-card-title">УПРАВЛЕНИЕ</h3>
                    <ul class="business-assistant-list">
                        <li>Перенеси встречу "Встреча с клиентом" на завтра в 16:00</li>
                        <li>Измени описание встречи "Совещание" на "Обсуждение проекта"</li>
                        <li>Запланируй встречу с клиентом на завтра в 15:00</li>
                    </ul>
                </div>
                <div class="business-assistant-card business-assistant-card-white">
                    <h3 class="business-assistant-card-title">ФУНКЦИОНАЛЬНОСТЬ</h3>
                    <ul class="business-assistant-list">
                        <li>Сколько сотрудников у меня работает и каков общий фонд зарплат?</li>
                        <li>Покажи последние 5 чеков</li>
                        <li>Какие товары есть в инвентаризации?</li>
                        <li>Проанализируй текст в прикрепленном файле</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="business-assistant-cta">
            <a href="{% url 'scenarios' %}" class="business-assistant-cta-button">Подробнее о сценариях использования →</a>
        </div>
    </section>
    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h4 class="footer-heading">О ПРОЕКТЕ</h4>
                <a href="#" class="footer-link">О нас</a>
                <a href="#" class="footer-link">Возможности</a>
                <a href="{% url 'chat' %}" class="footer-link">Попробовать ассистента</a>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">ПОДДЕРЖКА</h4>
                <a href="{% url 'support' %}" class="footer-link">Помощь</a>
                <a href="{% url 'feedback' %}" class="footer-link">Обратная связь</a>
                <a href="#" class="footer-link">Документация</a>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">КОНТАКТЫ</h4>
                <p class="footer-text">Нижневартовск</p>
                <a href="mailto:support@alfa-assistant.ru" class="footer-link">support@alfa-assistant.ru</a>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">МЫ В СОЦСЕТЯХ</h4>
                <div class="footer-social">
                    <a href="#" class="social-icon social-telegram">
                        <img src="{% static 'images/tg.png' %}" alt="Telegram" loading="lazy">
                    </a>
                    <a href="#" class="social-icon social-vk">
                        <img src="{% static 'images/vk.png' %}" alt="VKontakte" loading="lazy">
                    </a>
                </div>
            </div>
        </div>
        <div class="footer-legal">
            <p>© 2025 Альфа-Ассистент. Все права защищены.</p>
            <p><a href="#">Политика конфиденциальности</a> | <a href="#">Условия использования</a></p>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scrollToTopBtn" class="scroll-to-top-btn" onclick="scrollToTop()" title="Наверх">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 19V5M12 5L5 12M12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>

    <!-- AI Helper Info Button -->
    <div class="ai-helper-info">
        <button class="ai-helper-info-btn" title="Возможности AI-помощника">
            <span class="ai-helper-info-icon"><img src="{% static 'images/light2.png' %}" alt="Возможности AI-помощника" style="width: 24px; height: 24px;" loading="lazy"></span>
        </button>
        <div class="ai-helper-info-content">
            <h3 class="ai-helper-info-title">Возможности AI-помощника</h3>
            <div class="ai-helper-info-list">
                <div class="ai-helper-info-section">
                    <h4 class="ai-helper-info-section-title">Анализ данных</h4>
                    <ul class="ai-helper-info-items">
                        <li>Чеки и финансовые операции</li>
                        <li>Инвентаризация и склад</li>
                        <li>Сотрудники и зарплаты</li>
                        <li>Календарь событий</li>
                        <li>Налоги и коммунальные услуги</li>
                        <li>Документы (PDF, DOCX, XLSX, изображения)</li>
                        <li>Балансы счетов</li>
                    </ul>
                </div>
                <div class="ai-helper-info-section">
                    <h4 class="ai-helper-info-section-title">Выполнение действий</h4>
                    <ul class="ai-helper-info-items">
                        <li>Создание и редактирование событий в календаре</li>
                        <li>Управление документами</li>
                        <li>Отправка сообщений в поддержку</li>
                        <li>Анализ загруженных файлов</li>
                    </ul>
                </div>
                <div class="ai-helper-info-section">
                    <h4 class="ai-helper-info-section-title">Ответы на вопросы</h4>
                    <ul class="ai-helper-info-items">
                        <li>Деловой стиль общения</li>
                        <li>Создание таблиц и отчетов</li>
                        <li>Анализ и рекомендации</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Показываем/скрываем кнопку при прокрутке
        window.addEventListener('scroll', function() {
            const scrollBtn = document.getElementById('scrollToTopBtn');
            if (window.pageYOffset > 300) {
                scrollBtn.style.display = 'flex';
            } else {
                scrollBtn.style.display = 'none';
            }
        });

        // Функция прокрутки наверх
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // Функции смены темы
        function toggleIndexTheme() {
            const currentTheme = localStorage.getItem('theme') || 'light';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            localStorage.setItem('theme', newTheme);
            applyIndexTheme(newTheme);
            updateIndexThemeIcon(newTheme);
        }

        function applyIndexTheme(theme) {
            if (theme === 'dark') {
                document.body.classList.add('dark-theme');
                document.documentElement.classList.add('dark-theme');
            } else {
                document.body.classList.remove('dark-theme');
                document.documentElement.classList.remove('dark-theme');
            }
        }

        function updateIndexThemeIcon(theme) {
            const themeIcon = document.getElementById('indexThemeIcon');
            if (!themeIcon) return;
            
            // SVG для светлой темы (солнце)
            const lightIcon = `<path d="M12 3V1M12 23V21M21 12H23M1 12H3M18.364 18.364L19.778 19.778M4.222 4.222L5.636 5.636M18.364 5.636L19.778 4.222M4.222 19.778L5.636 18.364M12 18C15.314 18 18 15.314 18 12C18 8.686 15.314 6 12 6C8.686 6 6 8.686 6 12C6 15.314 8.686 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>`;
            
            // SVG для темной темы (луна)
            const darkIcon = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>`;
            
            themeIcon.innerHTML = theme === 'dark' ? darkIcon : lightIcon;
        }

        // Применение сохраненной темы при загрузке
        window.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            applyIndexTheme(savedTheme);
            updateIndexThemeIcon(savedTheme);
            
            // Обновление кнопки авторизации при загрузке
            updateAuthButton();
        });

        // Проверка авторизации пользователя
        function isUserAuthenticated() {
            const currentUser = localStorage.getItem('currentUser');
            if (!currentUser) return false;
            try {
                const user = JSON.parse(currentUser);
                return user && user.email;
            } catch (e) {
                return false;
            }
        }

        // Обработка клика на кнопку ИИ-Чат
        function handleChatClick(event) {
            event.preventDefault();
            
            if (isUserAuthenticated()) {
                // Пользователь авторизован - переходим в чат
                window.location.href = "{% url 'chat' %}";
            } else {
                // Пользователь не авторизован - показываем модальное окно
                document.getElementById('loginRequiredModal').style.display = 'flex';
            }
        }

        // Обработка клика на кнопку Личный кабинет
        function handleCabinetClick(event) {
            event.preventDefault();
            
            if (isUserAuthenticated()) {
                // Пользователь авторизован - переходим в кабинет
                window.location.href = "{% url 'cabinet' %}";
            } else {
                // Пользователь не авторизован - показываем модальное окно регистрации
                document.getElementById('loginRequiredModal').style.display = 'flex';
            }
        }

        // Обработка клика на кнопку авторизации/профиля
        function handleAuthButtonClick(event) {
            event.preventDefault();
            
            if (isUserAuthenticated()) {
                // Показываем модальное окно профиля
                showProfileModal();
            } else {
                // Переходим на страницу входа
                window.location.href = "{% url 'login' %}";
            }
        }

        // Обновление вида кнопки авторизации
        function updateAuthButton() {
            const authBtn = document.getElementById('indexAuthBtn');
            if (!authBtn) return;
            
            if (isUserAuthenticated()) {
                authBtn.textContent = 'Профиль';
                authBtn.classList.add('index-profile-btn');
            } else {
                authBtn.textContent = 'Войти / Регистрация';
                authBtn.classList.remove('index-profile-btn');
            }
        }

        // Показать модальное окно профиля
        function showProfileModal() {
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const modal = document.getElementById('indexProfileModal');
            
            // Заполняем данные профиля
            document.getElementById('indexProfileName').textContent = currentUser.organization || 'Не указано';
            document.getElementById('indexProfileEmail').textContent = currentUser.email || 'Не указано';
            
            modal.style.display = 'flex';
        }

        // Редактирование профиля
        function editProfile() {
            closeProfileModal();
            window.location.href = "{% url 'cabinet' %}";
        }

        // Закрыть модальное окно профиля
        function closeProfileModal() {
            document.getElementById('indexProfileModal').style.display = 'none';
        }

        // Закрыть модальное окно авторизации
        function closeLoginRequiredModal() {
            document.getElementById('loginRequiredModal').style.display = 'none';
        }

        // Переход на страницу входа из модального окна
        function goToLogin() {
            window.location.href = "{% url 'login' %}";
        }

        // Выход из аккаунта
        function logout() {
            if (confirm('Вы уверены, что хотите выйти?')) {
                localStorage.removeItem('currentUser');
                updateAuthButton();
                closeProfileModal();
                // Обновляем страницу для применения изменений
                window.location.reload();
            }
        }

        // Закрытие модальных окон по клику вне их
        window.addEventListener('click', function(event) {
            const profileModal = document.getElementById('indexProfileModal');
            const loginModal = document.getElementById('loginRequiredModal');
            
            if (event.target === profileModal) {
                closeProfileModal();
            }
            if (event.target === loginModal) {
                closeLoginRequiredModal();
            }
        });
    </script>

    <!-- Modal: Требуется авторизация -->
    <div class="index-modal" id="loginRequiredModal" style="display: none;">
        <div class="index-modal-content">
            <div class="index-modal-header">
                <h2 class="index-modal-title">Требуется авторизация</h2>
                <button class="index-modal-close" onclick="closeLoginRequiredModal()">×</button>
            </div>
            <div class="index-modal-body">
                <p class="index-modal-text">Для использования ИИ-чата необходимо войти в аккаунт или зарегистрироваться.</p>
            </div>
            <div class="index-modal-footer">
                <button class="index-modal-btn index-modal-btn-secondary" onclick="closeLoginRequiredModal()">Отмена</button>
                <button class="index-modal-btn index-modal-btn-primary" onclick="goToLogin()">Войти / Регистрация</button>
            </div>
        </div>
    </div>

    <!-- Modal: Профиль пользователя -->
    <div class="index-modal" id="indexProfileModal" style="display: none;">
        <div class="index-profile-modal-content">
            <div class="index-profile-header">
                <h2 class="index-profile-title">Профиль</h2>
                <button class="index-profile-back-btn" onclick="closeProfileModal()" title="Закрыть">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 18L9 12L15 6" stroke="#ff3333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="index-profile-body">
                <div class="index-profile-info-block">
                    <div class="index-profile-name" id="indexProfileName">Не указано</div>
                    <div class="index-profile-email" id="indexProfileEmail">Не указано</div>
                </div>
                <div class="index-profile-actions">
                    <button class="index-profile-action-btn" onclick="editProfile()">
                        <span>Редактировать профиль</span>
                    </button>
                    <button class="index-profile-action-btn index-profile-action-btn-logout" onclick="logout()">
                        <span>Выйти</span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>

